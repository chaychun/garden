---
import Widget from "@/components/widgets/Widget.astro";
import type { AstroInstance } from "astro";
import { MousePointerClick } from "lucide-react";

interface Props {
	id: string;
	title: string;
	bgImage?: string;
	bgFillClass?: string;
	[key: string]: any;
}

const { id, title, bgImage, bgFillClass, ...rest } = Astro.props as Props;

const interactiveModules = import.meta.glob<AstroInstance>(
	"../../projects/*/*.astro",
	{ eager: true },
);
const key = `../../projects/${id}/${id}.astro`;
let ComponentToRender: AstroInstance["default"] | null = null;
if (key in interactiveModules) {
	ComponentToRender = interactiveModules[key].default;
}
---

<Widget
	class:list={[
		"flex w-full shrink-0 flex-col gap-2 md:w-[528px] md:basis-[528px] md:justify-between",
		"mb-12 md:mb-0",
	]}
	bgImage={bgImage}
	bgFillClass={bgFillClass}
	data-cursor-hover
	data-cursor-title={title}
	data-cursor-type="interactive"
	{...rest}
>
	{ComponentToRender && <ComponentToRender />}
	<div
		slot="footer"
		class="text-base-900 flex w-full items-center justify-between text-[11px] leading-none font-medium uppercase md:hidden"
	>
		<span class="min-w-0 flex-1 truncate">{title}</span>
		<MousePointerClick className="h-[11px] w-[11px]" />
	</div>
</Widget>
