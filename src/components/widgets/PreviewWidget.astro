---
import BlurOverlay from "@/components/ui/blur-overlay";
import Widget from "@/components/widgets/Widget.astro";
import { getCldImageUrl, getCldVideoUrl } from "astro-cloudinary/helpers";

interface Props {
	title: string;
	description: string;
	date: string;
	bgImage: string;
	previewVideo: string;
	types?: string[];
	tone?: "light" | "dark";
	id: string;
	[key: string]: any;
}

const { title, bgImage, previewVideo, id, ...rest } = Astro.props;

const bgImageUrl = getCldImageUrl({ src: bgImage, width: 600 });
const previewVideoUrl = getCldVideoUrl({ src: previewVideo });
---

<Widget
	class:list={[
		"flex max-w-[528px] flex-col gap-3 md:justify-between",
		"mb-12 md:mb-0",
	]}
	{...rest}
>
	<a
		href={`/project/${encodeURIComponent(id)}/`}
		class="block"
		aria-label={`View ${title}`}
		data-cursor-hover
		data-cursor-title={title}
	>
		<div
			class:list={[
				"group relative flex w-full items-center justify-center",
				"aspect-4/5",
			]}
			style={{
				backgroundImage: `url(${bgImageUrl})`,
				backgroundSize: "cover",
			}}
		>
			<BlurOverlay client:load />

			<video
				src={previewVideoUrl}
				loop
				muted
				autoplay
				playsinline
				class="relative z-10 h-auto w-[90%]"></video>
		</div>
	</a>
</Widget>
